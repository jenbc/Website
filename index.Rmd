---
title: "Usage of SQL"
output: html_document
---

Filtering Rows and Comlums 

With SQL we can filter coloumns with SELECT and rows with WHERE. To show this I will use the Lahman package on RStudio, which is a baseball database. First, we need to need to install the two packages: Lahman and sqldf. 


```{r warning=FALSE, message=FALSE}
library(Lahman)
library(sqldf)
```

Suppose we want to see the total number of homeruns for the Yankees in 1927. We could write the following
```{r}
query<-"SELECT playerID,yearID,teamID,HR From Batting
Where teamID='NYA' and yearID=1927"
sqldf(query)
```
Batting
colnames(Batting)

Here we will learn how to create a query for New York Yankee player that have more than 40 homeruns
```{r}
query<-"SELECT playerID,yearID,teamID,HR From Batting
Where teamID='NYA' and HR>=40"
sqldf(query)
```
Examples of player having more than 40HR but less than 60strikeouts(SO)
```{r}
query1<-"SELECT playerID,yearID,teamID,SO,HR From Batting
Where SO<60 and HR>40"
sqldf(query1)
```
Instances of Phillies in the 1970's hitting more than 30 homeruns
```{r}
query2<-"SELECT playerID,yearID,teamID,HR From Batting
Where yearID>1970 and yearID<1979 and HR>=30 and teamID='PHI'"
sqldf(query2)
```
Ranking Data 
For this example we will present
Player hits with more than 50 homeruns but lets have players with the most homeruns at the top 
```{r}
query3<-"SELECT playerID,yearID,teamID,HR From Batting
Where HR>=50
Order By HR DESC"
sqldf(query3)
```
Find ll instances ofa player striking out less than 10 times. At least 400 at-bat(AB). Players with least SO at top
```{r}
query4<-"SELECT playerID,yearID,teamID,SO, AB From Batting
Where AB>=400 and SO<10
Order by SO"
sqldf(query4)
```